(()=>{"use strict";let e=!0,t=(t=500)=>{let r=document.querySelector("body");if(e){let n=document.querySelectorAll("._lp");setTimeout((()=>{for(let e=0;e<n.length;e++){n[e].style.paddingRight="0px"}r.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),t),e=!1,setTimeout((function(){e=!0}),t)}};let r=(e,r=!1,n=500,o=0)=>{const l=document.querySelector(e);if(l){let e="",s=0;r&&(e="header.header",s=document.querySelector(e).offsetHeight);let a={speedAsDuration:!0,speed:n,header:e,offset:o,easing:"easeOutQuad"};document.documentElement.classList.contains("menu-open")&&(t(),document.documentElement.classList.remove("menu-open")),"undefined"!=typeof SmoothScroll?(new SmoothScroll).animateScroll(l,"",a):window.scrollTo({top:s?l.getBoundingClientRect().top-s:l.getBoundingClientRect().top,behavior:"smooth"})}else console.log(`[gotoBlock]: Такого блока нет на странице: ${e}`)};const n={inputMaskModule:null,selectModule:null};let o={getErrors(e){let t=0,r=e.querySelectorAll("*[data-required]");return r.length&&r.forEach((e=>{null===e.offsetParent&&"SELECT"!==e.tagName||e.disabled||(t+=this.validateInput(e))})),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.dataset.error&&e.parentElement.insertAdjacentHTML("beforeend",`<div class="form__error">${e.dataset.error}</div>`)},removeError(e){e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(e){e.reset(),setTimeout((()=>{let t=e.querySelectorAll("input,textarea");for(let e=0;e<t.length;e++){const r=t[e];r.parentElement.classList.remove("_form-focus"),r.classList.remove("_form-focus"),o.removeError(r),r.value=r.dataset.placeholder}let r=e.querySelectorAll(".checkbox__input");if(r.length>0)for(let e=0;e<r.length;e++){r[e].checked=!1}if(n.selectModule){let t=e.querySelectorAll(".select");if(t.length)for(let e=0;e<t.length;e++){const r=t[e].querySelector("select");n.selectModule.selectBuild(r)}}}),0)},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};let l=!1;setTimeout((()=>{l&&window.addEventListener("scroll",(function(e){document.dispatchEvent(new Event("windowScroll"))}))}),0),function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),function(e){const t=document.forms;if(t.length)for(const e of t)e.addEventListener("submit",(function(e){n(e.target,e)})),e.addEventListener("reset",(function(e){const t=e.target;o.formClean(t)}));async function n(t,n){if(0===(e?o.getErrors(t):0)){const e=t.dataset.popup;if(t.hasAttribute("data-ajax")){n.preventDefault();const r=t.getAttribute("action")?t.getAttribute("action").trim():"#",l=t.getAttribute("method")?t.getAttribute("method").trim():"GET",s=new FormData(t);t.classList.add("_sending");const a=await fetch(r,{method:l,body:s});if(a.ok){await a.json();t.classList.remove("_sending"),e&&popupItem.open(`#${e}`),o.formClean(t)}else alert("Ошибка"),t.classList.remove("_sending")}t.hasAttribute("data-dev")&&(n.preventDefault(),e&&popupItem.open(`#${e}`),o.formClean(t))}else{n.preventDefault();const e=t.querySelector("._form-error");e&&t.hasAttribute("data-goto-error")&&r(e,!0,1e3)}}}(!0),function(){const e=document.querySelectorAll(".rating");e.length>0&&function(){let t,r;for(let t=0;t<e.length;t++){n(e[t])}function n(e){o(e),l(),e.classList.contains("rating_set")&&s(e)}function o(e){t=e.querySelector(".rating__active"),r=e.querySelector(".rating__value")}function l(e=r.innerHTML){const n=e/.05;t.style.width=`${n}%`}function s(e){const t=e.querySelectorAll(".rating__item");for(let n=0;n<t.length;n++){const s=t[n];s.addEventListener("mouseenter",(function(t){o(e),l(s.value)})),s.addEventListener("mouseleave",(function(e){l()})),s.addEventListener("click",(function(t){o(e),e.dataset.ajax?a(s.value,e):(r.innerHTML=n+1,l())}))}}async function a(e,t){if(!t.classList.contains("rating_sending")){t.classList.add("rating_sending");let e=await fetch("rating.json",{method:"GET"});if(e.ok){const n=(await e.json()).newRating;r.innerHTML=n,l(),t.classList.remove("rating_sending")}else alert("Ошибка"),t.classList.remove("rating_sending")}}}()}()})();